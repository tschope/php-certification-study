import{_ as h,r as i,i as w,x as r,y as t,D as _,E as I,z as E,F as u,G as c,H as p,L as m,v as d,m as b,q as k}from"./BJqDwa92.js";import{_ as C}from"./0AbEWBNf.js";const D={class:"flex flex-col items-center justify-center min-h-screen bg-gray-100 px-4"},T={key:0,class:"text-blue-500 text-center mb-4"},U={class:"mb-4"},A=["disabled"],j={class:"mb-4"},q=["disabled"],B={class:"flex items-center justify-between"},V=["disabled"],H={class:"mt-4"},M={class:"text-sm text-gray-600"},N={__name:"unsubscribe",setup(S){const o=i({applicationId:"",email:""}),n=i({text:"",type:""}),a=i(!1),f=w(()=>n.value.type==="success"?"bg-green-100 text-green-700 border border-green-500":"bg-red-100 text-red-700 border border-red-500"),x=k(),g=async()=>{var l,e;a.value=!0;try{const s=await $fetch(`${x.public.apiBase}/unsubscribe`,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:{applicationId:o.value.applicationId,email:o.value.email}});if(s.success)n.value={text:"You have successfully unsubscribed. Redirecting to the home page...",type:"success"},setTimeout(()=>{b("/")},5e3);else throw new Error(s.message||"Unsubscription failed")}catch(s){const y=((e=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:e.message)||s.message||"An error occurred while unsubscribing.";n.value={text:y,type:"error"}}finally{a.value=!1}},v=()=>{b("/")};return(l,e)=>(d(),r("div",D,[e[4]||(e[4]=t("h1",{class:"text-4xl font-bold text-center mb-4"}," Unsubscribe from Notifications ",-1)),e[5]||(e[5]=t("p",{class:"text-lg text-center mb-8"}," Enter your Application ID and Email to unsubscribe from status notifications. ",-1)),e[6]||(e[6]=t("img",{src:C,alt:"Logo",class:"w-[460px] h-[180px] mb-4"},null,-1)),n.value.text?(d(),r("div",{key:0,class:_([I(f),"w-full max-w-md text-center p-4 mb-4 rounded-lg"])},E(n.value.text),3)):u("",!0),t("form",{class:"w-full max-w-md bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:m(g,["prevent"])},[a.value?(d(),r("div",T,"Processing your request...")):u("",!0),t("div",U,[e[2]||(e[2]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"applicationId"}," Application ID ",-1)),c(t("input",{type:"text",id:"applicationId","onUpdate:modelValue":e[0]||(e[0]=s=>o.value.applicationId=s),class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter your Application ID",disabled:a.value,required:""},null,8,A),[[p,o.value.applicationId]])]),t("div",j,[e[3]||(e[3]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"email"}," Email ",-1)),c(t("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=s=>o.value.email=s),class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter your Email",disabled:a.value,required:""},null,8,q),[[p,o.value.email]])]),t("div",B,[t("button",{type:"submit",disabled:a.value,class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"}," Unsubscribe ",8,V)])],32),t("div",H,[t("p",M,[t("a",{onClick:m(v,["prevent"]),class:"text-blue-500 hover:underline cursor-pointer"}," Home ")])])]))}},P=h(N,[["__scopeId","data-v-d8b90a26"]]);export{P as default};
